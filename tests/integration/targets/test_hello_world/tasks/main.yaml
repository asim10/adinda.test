---
- name: Test hello_world module with valid data
  adinda.test.hello_world:
    firstname: "Adinda"
    lastname: "Test"
    age: 25
    profession: "Engineer"
  register: result

- name: Verify module output
  assert:
    that:
      - result.changed == false
      - result.user_data.firstname == "Adinda"
      - result.user_data.lastname == "Test"
      - result.user_data.age == 25
      - result.user_data.profession == "Engineer"
    fail_msg: "The module output did not match the expected user_data structure"

- name: Test module failure (missing required field)
  adinda.test.hello_world:
    firstname: "Incomplete"
  ignore_errors: yes
  register: fail_result

- name: Verify failure on missing parameters
  assert:
    that:
      - fail_result.failed == true
      # Check for individual keywords to avoid failures due to string ordering
      - "'age' in fail_result.msg"
      - "'lastname' in fail_result.msg"
      - "'profession' in fail_result.msg"
      - "fail_result.msg is search('missing required arguments')"
    fail_msg: "The module did not report the expected missing required arguments."